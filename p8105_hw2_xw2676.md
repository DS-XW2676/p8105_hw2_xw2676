p8105\_hw2\_xw2676.Rmd
================

## Problem1

#### Read and clean the Mr. Trash Wheel sheet:

``` r
Mr.Trash_Wheel = read_excel("./dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                            sheet = "Mr. Trash Wheel",
                            range = "A2:N338") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls,digits = 0)))
```

#### Read and clean precipitation data for 2017 and 2018:

``` r
data_2017 = read_excel("./dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                       sheet = "2017 Precipitation",range = "A2:B14") %>%
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = 2017)
data_2018 = read_excel("./dataset/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                       sheet = "2018 Precipitation",range = "A2:B14") %>%
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = 2018)
data_2017_2018 = bind_rows(data_2017, data_2018) %>%
  mutate(month=month.name[month])
```

#### Interpretation

There are 285 observations, 14 variables in Mr.Trash\_Wheel dataset,
whose key variables are weight\_tons, volume\_cubic\_yards,
plastic\_bottles, polystyrene, cigarette\_butts, glass\_bottles,
grocery\_bags, chip\_bags, sports\_balls, homes\_powered. There are 19
observations, 3 variables in data\_2018 dataset, whose key variables are
total.

The total precipitation in data\_2018 was 23.5. The median number of
sports balls in a dumpster in 2017 was 8.

## Problem2

#### clean the data in pols-month.csv

``` r
pols_month = read_csv("./dataset/pols-month.csv") %>%
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month","day"), sep = "-")%>%
  mutate(
    year=as.integer(year),
    month=as.integer(month),
    month=month.name[month])%>% 
  pivot_longer(
    c("prez_gop","prez_dem"),
    names_to = "president",
    names_prefix = "prez_") %>% 
  filter(value == 1|value == 2) %>% 
  select(-value,-day) 
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

#### clean the data in snp.csv

``` r
snp = read_csv("./dataset/snp.csv") %>%
  janitor::clean_names() %>% 
  separate(date, into = c("month","day","year"), sep = "/") %>%
  mutate(
    year = as.numeric(year),
    month = as.numeric(month),
    month = month.name[month]) %>% 
    select(-day) %>% 
    arrange(year,month)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snp = snp[,c(2,1,3)]
```

#### tidy the unemployment data

``` r
unemployment = read_csv("./dataset/unemployment.csv") %>%
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment") %>% 
  mutate(
    month = factor(month, 
                   levels =
  c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","dec","nov"),
                   labels =
  c("1","2","3","4","5","6","7","8","9","10","11","12"))
  ) %>% 
  mutate(
    month = month.name[as.numeric(month)]
  )
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

#### Join the datasets by merging snp into pols, and merging unemployment into the result.

``` r
pols_month = unite(pols_month,date,year:month)
snp = unite(snp,date,year:month)
unemployment = unite(unemployment,date,year:month)
join_data = 
  left_join(pols_month, snp, by = "date") %>% 
  left_join(unemployment, by = "date")
```

#### Interpretation

There are 822 observations and 8 variables in pols\_month dataset. This
dataset is the monthly data of political parties of states, politicians
and presidents in USA. The key variables are gov\_gop, sen\_gop,
rep\_gop, gov\_dem, sen\_dem, rep\_dem, president.

There are 787 observations and 2 variables in snp dataset. The key
variables are close.

There are 816 observations and 2 variables in unemployment dataset. This
dataset is the monthly data of unemployment percentage.The key variables
are unemployment.

There are 822 observations and 10 variables in join\_data. The key
variables are gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem,
rep\_dem, president, close, unemployment. The range of year is from
1947\_April to 2015\_May.

## Problem3

#### Load and tidy the data.

``` r
Popular_Baby_Names = read_csv("./dataset/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>% 
  mutate(childs_first_name = str_to_title(childs_first_name)) %>% 
  distinct()
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

#### Produce a well-structured, reader-friendly table showing the rank in popularity of the name “Olivia” as a female baby name over time

``` r
olivia = filter(Popular_Baby_Names, childs_first_name == "Olivia") %>%
  select(-gender,-childs_first_name,-count) %>% 
pivot_wider(names_from = year_of_birth,
            values_from = rank)
olivia
```

    ## # A tibble: 7 x 7
    ##   ethnicity                  `2016` `2015` `2014` `2013` `2012` `2011`
    ##   <chr>                       <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>
    ## 1 ASIAN AND PACIFIC ISLANDER      1      1      1      3     NA      4
    ## 2 BLACK NON HISPANIC              8      4      8      6     NA     10
    ## 3 HISPANIC                       13     16     16     22     22     18
    ## 4 WHITE NON HISPANIC              1      1      1      1     NA      2
    ## 5 ASIAN AND PACI                 NA     NA     NA     NA      3     NA
    ## 6 BLACK NON HISP                 NA     NA     NA     NA      8     NA
    ## 7 WHITE NON HISP                 NA     NA     NA     NA      4     NA

#### Produce a similar table showing the most popular name among male children over time.

``` r
popular_male_name = filter(Popular_Baby_Names, gender == "MALE",rank == 1) %>% 
  select(-rank, -count, -gender) %>% 
  pivot_wider(
  names_from = "year_of_birth",
  values_from = c("childs_first_name"))
popular_male_name
```

    ## # A tibble: 7 x 7
    ##   ethnicity                  `2016` `2015` `2014` `2013` `2012` `2011` 
    ##   <chr>                      <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  
    ## 1 ASIAN AND PACIFIC ISLANDER Ethan  Jayden Jayden Jayden <NA>   Ethan  
    ## 2 BLACK NON HISPANIC         Noah   Noah   Ethan  Ethan  <NA>   Jayden 
    ## 3 HISPANIC                   Liam   Liam   Liam   Jayden Jayden Jayden 
    ## 4 WHITE NON HISPANIC         Joseph David  Joseph David  <NA>   Michael
    ## 5 ASIAN AND PACI             <NA>   <NA>   <NA>   <NA>   Ryan   <NA>   
    ## 6 BLACK NON HISP             <NA>   <NA>   <NA>   <NA>   Jayden <NA>   
    ## 7 WHITE NON HISP             <NA>   <NA>   <NA>   <NA>   Joseph <NA>

#### produce a scatter plot

``` r
male_white_nonhispanic_2016 = filter(Popular_Baby_Names, gender == "MALE", ethnicity == "WHITE NON HISPANIC", year_of_birth == 2016) %>% 
ggplot( aes(x = rank, y = count)) + 
  geom_point()
ggsave("sactterplot of male_white_nonhispanic_2016.pdf")
```

    ## Saving 7 x 5 in image
